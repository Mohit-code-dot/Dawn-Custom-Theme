<style>
    #bestsellerWrapper{
      padding:2rem 0;
    }
    #bestseller i {
      background: #fff;
      padding: 0.5rem;
      color: #000;
      margin-top: -0.5rem;
      border-radius:50%;
      border:1px solid #000;
      position:absolute;
  }
    #bestseller{
      display:flex;
      justify-content:center;
      align-items:center;
      flex-direction:column;
      position:relative;
    }
    #bestcenterimage img{
      border-radius:50%;
    }
    #bestsellerheading{
      display:flex;
      justify-content:center;
      align-items:center;
      flex-direction:column;
      padding:4rem 0;
    }
    #bestsellerheading a {
      background: #000;
      padding: 0.5rem 2rem;
      border-radius: 10px;
      color:#fff;
      text-decoration:none;
  }
  #container {
    position: absolute;
    width: 450px;
    height: 450px;
    top: -6%;
    animation: colors 1000s infinite;
  }

  #halfclip {
    width: 50%;
    height: 100%;
    right: 0px;
    position: absolute;
    overflow: hidden;
    transform-origin: left center;
    animation: cliprotate 10s steps(2) infinite;
    -webkit-animation: cliprotate 10s steps(2) infinite;
  }
  {% for block in section.blocks %}
  .halfcircle {
    box-sizing: border-box;
    height: 100%;
    right: 0px;
    position: absolute;
    border: solid 10px transparent;
    border-top-color: {{ block.settings.bestsellerimgcolor }};
    border-left-color: {{ block.settings.bestsellerimgcolor }};
    border-radius: 50%;
  }
    {% endfor %}

  #clipped {
    width: 200%;
   animation: rotate 5s linear infinite;
    -webkit-animation: rotate 5s linear infinite;
  }

  #fixed {
    width: 100%;
    transform: rotate(135deg);
     animation: showfixed 10s steps(2) infinite;
    -webkit-animation: showfixed 10s linear infinite;
  }

  @-webkit-keyframes cliprotate {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes cliprotate {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @-webkit-keyframes rotate {
    0% {
      transform: rotate(-45deg);
    }
    100% {
      transform: rotate(135deg);
    }
  }

  @keyframes rotate {
    0% {
      transform: rotate(-45deg);
    }
    100% {
      transform: rotate(135deg);
    }
  }

  @-webkit-keyframes showfixed {
    0% {
      opacity: 0;
    }
    49.9% {
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      opacity: 1;
    }
  }

  /* Adding this to make the animation smoother */
  * {
    transition: all 0.1s ease-in-out;
  }

    @media(max-width:767px){
      #bestseller{
        padding:7rem 0;
      }
      #container {
      position: absolute;
      width: 360px;
      height: 360px;
      top: 11%;
  }
      #bestcenterimage{
      width:320px!important;
      height:320px!important;
      padding:1rem;
    }
      #centerImage{
      width:290px!important;
      height:290px!important;
      }
      #best01text_6fp9gt {
      top: 85%!important;
      left: 3%!important;
      }
      #best01text_ffVUJM {
      top: 85% !important;
      left: 75% !important;
      }
      #best01text_iLCYTU{
        top: 0%!important;
       left: 75%!important;
      }
    }
</style>
<section id="bestsellerWrapper">
  <div id="bestsellerheading">
    <h2>{{ section.settings.bestsellerheading }}</h2>
    <a href="{{ section.settings.bestsellerbtnurl }}">{{ section.settings.bestsellerbtntext }}</a>
  </div>
  <div id="bestseller">
    {% for block in section.blocks %}
      <style>
        #best01{{ block.id }} img{
            border-radius:50%;
            height:80px;
            width:80px;
          }
        #best01text_6fp9gt{
            width:80px;
            height:80px;
            border-radius:50%;
            position:absolute;
            top:53%;
            left:25%;
            display:flex;
            justify-content:flex-end;
            align-items:flex-start;
            cursor:pointer;
          }
          #best01text_ffVUJM{
            width:80px;
            height:80px;
            border-radius:50%;
            position:absolute;
            top:20%;
            right:30%;
            display:flex;
            justify-content:flex-end;
            align-items:flex-start;
            cursor:pointer;
          }
          #best01text_iLCYTU{
            width:80px;
            height:80px;
            border-radius:50%;
            position:absolute;
            top:80%;
            right:30%;
            display:flex;
            justify-content:flex-end;
            align-items:flex-start;
            cursor:pointer;
          }
            #bestcenterimage{
            width:400px;
            height:400px;
            padding:1.5rem;
            border-radius:50%;
          }
            #centerImage{
            width:370px;
            height:370px;
            }
      </style>
      <div id="best01{{ block.id }}" style="background:{{block.settings.bestsellerimgcolor}};">
        <img src="{{ block.settings.bestsellerimg | img_url:'master' }}" width="80px" height="80px">
        <i class="fa-solid fa-plus"></i>
      </div>
    {% endfor %}

    <div id="container">
      <div id="halfclip">
        <div class="halfcircle" id="clipped"></div>
      </div>
      <div class="halfcircle" id="fixed"></div>
    </div>

    <div id="bestcenterimage">
      <img id="centerImage" src="" width="400px" height="400px">
    </div>
  </div>
</section>

<script>
  const centerImage = document.getElementById("centerImage");
  const bestcenterimage = document.querySelector("#bestcenterimage");
  const clipped = document.getElementById("clipped");
  const fixed = document.getElementById("fixed");
  const circle01 = document.querySelector("#best01text_6fp9gt img");
  const circle02 = document.querySelector("#best01text_ffVUJM img");
  const circle03 = document.querySelector("#best01text_iLCYTU img");
  const circlebg01 = document.querySelector("#best01text_6fp9gt");
  const circlebg02 = document.querySelector("#best01text_ffVUJM");
  const circlebg03 = document.querySelector("#best01text_iLCYTU");

  circlebg01.addEventListener("click", bestSeller);
  circlebg02.addEventListener("click", bestSeller2);
  circlebg03.addEventListener("click", bestSeller3);
  centerImage.src = circle01.src;
  let color1 = circlebg01.style.background;
  bestcenterimage.style.background = color1;
  clipped.style.borderTopColor = color1;
  clipped.style.borderLeftColor = color1;
  fixed.style.borderTopColor = color1;
  fixed.style.borderLeftColor = color1;
   function bestSeller(){
     let color = circlebg01.style.background;
     bestcenterimage.style.background = color;
     centerImage.src = circle01.src;
     clipped.style.borderTopColor = color;
     clipped.style.borderLeftColor = color;
     fixed.style.borderTopColor = color;
     fixed.style.borderLeftColor = color;
   }
   function bestSeller2(){
     let color = circlebg02.style.background;
     bestcenterimage.style.background = color;
     centerImage.src = circle02.src;
     clipped.style.borderTopColor = color;
     clipped.style.borderLeftColor = color;
     fixed.style.borderTopColor = color;
     fixed.style.borderLeftColor = color;
   }
   function bestSeller3(){
     let color = circlebg03.style.background;
     bestcenterimage.style.background = color;
     centerImage.src = circle03.src;
     clipped.style.borderTopColor = color;
     clipped.style.borderLeftColor = color;
     fixed.style.borderTopColor = color;
     fixed.style.borderLeftColor = color;
   }
</script>

{% schema %}
{
  "name": "BestSeller",
  "max_blocks": 3,
  "settings": [
    {
      "type": "text",
      "id" : "bestsellerheading",
      "label": "Add Heading"
    },
    {
      "type": "url",
      "id": "bestsellerbtnurl",
      "label": "Button Url"
    },
    {
      "type": "text",
      "id": "bestsellerbtntext",
      "label": "Button Text"
    }
  ],
  "blocks": [
    {
      "type": "text",
      "name": "Add Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "bestsellerimg",
          "label": "Add Image"
        },
        {
          "type": "color",
          "id": "bestsellerimgcolor",
          "label": "image Border Color"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "BestSeller"
    }
  ]
}
{% endschema %}
