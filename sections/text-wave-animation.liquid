<style>
  #text-container{
    width:102.5vw;
  }
  @media(max-width:767px){
    #waveimg{
      top:-5rem!important;
    }
    #text-container{
      bottom: 4rem!important;
    }
    #text-container text{
      font-size:6rem!important;
    }
  }
  @media(min-width:1920px){
    #waveimg{
      top:-26.5rem!important;
    }
    #text-container{
      bottom: 21rem!important;
    }
  }
</style>
<section id="waveSection" style="background:#FEF5E6;position:relative;">
  <div id="waveBg"></div>
  <img
    id="waveimg"
    style="position:relative;top:-20rem;"
    src="https://originnutrition.in/wp-content/themes/origin/images/assets/home-gallery-wave.svg"
    width="100%"
    height="100%"
  >
  <svg
    id="text-container"
    viewBox="0 0 1920 293"
    xmlns="http://www.w3.org/2000/svg"
    style="position:absolute;z-index:1;bottom:15rem;left:0;"
  >
    <path id="text-curve" d="M0,178.733c259.642-98.012,562.975-98.012,910,0c347.025,98.011,683.691,38.6,1010-178.233" fill="none"/>

    <text y="40" font-size="32">
      <textPath id="text-path" href="#text-curve" startOffset="200">
        <tspan style="fill:#612d0f">{{ section.settings.wavetext01 }}</tspan>&nbsp;
        <tspan style="fill:#612d0f">{{ section.settings.wavetext02 }}</tspan>&nbsp;
        <tspan style="fill:#612d0f">{{ section.settings.wavetext03 }}</tspan>&nbsp;
        <tspan style="fill:#612d0f">{{ section.settings.wavetext04 }}</tspan>&nbsp;
        <tspan style="fill:#612d0f">{{ section.settings.wavetext05 }}</tspan>&nbsp;
      </textPath>
    </text>
  </svg>
</section>

<script>
  var textPath = document.querySelector('#text-path');

  var textContainer = document.querySelector('#text-container');

  var path = document.querySelector( textPath.getAttribute('href') );

  var pathLength = path.getTotalLength();

  function updateTextPathOffset(offset){
    textPath.setAttribute('startOffset', offset);
  }

  updateTextPathOffset(pathLength);

  function onScroll(){
    requestAnimationFrame(function(){
      var rect = textContainer.getBoundingClientRect();
      var scrollPercent = rect.y / window.innerHeight;
      updateTextPathOffset( scrollPercent * 2 * pathLength );
    });
  }

  window.addEventListener('scroll',onScroll);
</script>

{% schema %}
{
  "name": "Text Wave Animation",
  "settings": [
    {
      "type" : "text",
      "id" : "wavetext01",
      "label" : "Add Text-1"
    },
    {
      "type" : "text",
      "id" : "wavetext02",
      "label" : "Add Text-2"
    },
    {
      "type" : "text",
      "id" : "wavetext03",
      "label" : "Add Text-3"
    },
    {
      "type" : "text",
      "id" : "wavetext04",
      "label" : "Add Text-4"
    },
    {
      "type" : "text",
      "id" : "wavetext05",
      "label" : "Add Text-5"
    }
  ],
  "presets" : [
    {
      "name": "Text Wave Animation",
      "category" : "Text Wave Animation"
    }
  ]
}
{% endschema %}
